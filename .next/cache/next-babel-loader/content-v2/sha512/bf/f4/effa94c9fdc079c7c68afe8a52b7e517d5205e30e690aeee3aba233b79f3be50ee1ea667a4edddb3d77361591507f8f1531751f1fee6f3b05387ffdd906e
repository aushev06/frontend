{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Projects\\\\projects\\\\frontend\\\\pages\\\\tags\\\\[slug].tsx\";\nimport React, { useState } from 'react';\nimport { useAllMQ } from \"../../utils/useAllMQ\";\nimport { setLike } from \"../../services/api/LikeApi\";\nimport { MainLayout } from \"../../layouts/MainLayout\";\nimport { MiniPost } from \"../../components/MiniPost\";\nimport { getPosts } from \"../../services/api/PostApi\";\nexport default function Home() {\n  const {\n    0: posts,\n    1: setPosts\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const mq = useAllMQ();\n\n  const handleSetLike = async (postId, like) => {\n    await setLike(postId, 'post', like);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(MainLayout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper\",\n        children: [!mq.isXS && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-side\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: [isLoading && 'Загрука...', !isLoading && posts.map((post, key) => {\n            return /*#__PURE__*/_jsxDEV(MiniPost, {\n              postData: {\n                commentsCount: post.comments_count,\n                description: post.description,\n                dislikesCount: post.dislikes_count,\n                likesCount: post.likes_count,\n                title: post.title,\n                viewsCount: post.views,\n                slug: post.slug,\n                user: {\n                  avatarUrl: post.user.avatar,\n                  id: post.user.id,\n                  name: post.user.name\n                },\n                imageUrl: post.img,\n                id: post.id,\n                tags: [],\n                time: new Date(post.updated_at),\n                vote: post === null || post === void 0 ? void 0 : post.liked_type\n              },\n              onSetLike: handleSetLike\n            }, post.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 36\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }, this), !mq.isXS && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-side\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n}\nexport async function getServerSideProps(ctx) {\n  var _ctx$query, _ctx$req$cookies;\n\n  const posts = await getPosts({\n    categories: (_ctx$query = ctx.query) === null || _ctx$query === void 0 ? void 0 : _ctx$query.slug\n  }, (_ctx$req$cookies = ctx.req.cookies) === null || _ctx$req$cookies === void 0 ? void 0 : _ctx$req$cookies.auth_token);\n  return {\n    props: {\n      posts\n    }\n  };\n}","map":{"version":3,"sources":["C:/Projects/projects/frontend/pages/tags/[slug].tsx"],"names":["React","useState","useAllMQ","setLike","MainLayout","MiniPost","getPosts","Home","posts","setPosts","isLoading","setIsLoading","mq","handleSetLike","postId","like","isXS","map","post","key","commentsCount","comments_count","description","dislikesCount","dislikes_count","likesCount","likes_count","title","viewsCount","views","slug","user","avatarUrl","avatar","id","name","imageUrl","img","tags","time","Date","updated_at","vote","liked_type","getServerSideProps","ctx","categories","query","req","cookies","auth_token","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {useAllMQ} from \"../../utils/useAllMQ\";\r\nimport {setLike} from \"../../services/api/LikeApi\";\r\nimport {MainLayout} from \"../../layouts/MainLayout\";\r\nimport {MiniPost} from \"../../components/MiniPost\";\r\nimport {PostData} from \"../../interfaces\";\r\nimport {getPosts, showPost} from \"../../services/api/PostApi\";\r\nimport {getCategories} from \"../../services/api/CategoryApi\";\r\n\r\n\r\nexport default function Home() {\r\n    const [posts, setPosts] = useState<PostData[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const mq = useAllMQ()\r\n\r\n    const handleSetLike = async (postId: number, like?: 'like' | 'dislike') => {\r\n        await setLike(postId, 'post', like)\r\n    }\r\n\r\n    return (\r\n        <main>\r\n            <MainLayout>\r\n                <div className=\"wrapper\">\r\n\r\n                    {!mq.isXS && (\r\n                        <div className=\"left-side\">\r\n\r\n                        </div>\r\n                    )}\r\n\r\n\r\n                    <div className=\"content\">\r\n\r\n                        {isLoading && 'Загрука...'}\r\n\r\n                        {!isLoading && posts.map((post, key) => {\r\n                            return <MiniPost\r\n                                key={post.id}\r\n                                postData={{\r\n                                    commentsCount: post.comments_count,\r\n                                    description: post.description,\r\n                                    dislikesCount: post.dislikes_count,\r\n                                    likesCount: post.likes_count,\r\n                                    title: post.title,\r\n                                    viewsCount: post.views,\r\n                                    slug: post.slug,\r\n                                    user: {\r\n                                        avatarUrl: post.user.avatar,\r\n                                        id: post.user.id,\r\n                                        name: post.user.name,\r\n                                    },\r\n                                    imageUrl: post.img,\r\n                                    id: post.id,\r\n                                    tags: [],\r\n                                    time: new Date(post.updated_at),\r\n                                    vote: post?.liked_type,\r\n                                }}\r\n                                onSetLike={handleSetLike}\r\n                            />;\r\n                        })}\r\n\r\n                    </div>\r\n                    {!mq.isXS && (\r\n                        <div className=\"right-side\">\r\n\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </MainLayout>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const posts =  await getPosts({categories: ctx.query?.slug}, ctx.req.cookies?.auth_token);\r\n\r\n    return {\r\n        props: {\r\n            posts\r\n        },\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}