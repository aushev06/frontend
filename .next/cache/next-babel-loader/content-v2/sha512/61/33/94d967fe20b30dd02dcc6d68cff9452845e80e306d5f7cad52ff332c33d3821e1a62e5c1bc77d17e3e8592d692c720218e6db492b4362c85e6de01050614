{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Projects\\\\projects\\\\frontend\\\\components\\\\PostComment\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport styles from \"./PostCommentList.module.scss\";\nimport { UserViewOnContent } from \"../UserViewOnContent\";\nimport { LikeBlock } from \"../LikeBlock\";\nimport React, { useState } from \"react\";\nimport { AddCommentBlock } from \"../AddCommentBlock\";\nimport { Dropdown } from \"../Dropdown\";\nimport MuiMenuItem from '@material-ui/core/MenuItem';\nexport function PostComment(_ref) {\n  _s();\n\n  var comment = _ref.comment,\n      onReplyComment = _ref.onReplyComment,\n      isChildren = _ref.isChildren,\n      onSetLike = _ref.onSetLike,\n      isMyComment = _ref.isMyComment;\n\n  var _useState = useState(false),\n      showReply = _useState[0],\n      setShowReply = _useState[1];\n\n  var _useState2 = useState(false),\n      showChange = _useState2[0],\n      setShowChange = _useState2[1];\n\n  var _React$useState = React.useState({\n    likes: comment.likes_count,\n    dislikes: comment.dislikes_count,\n    vote: comment === null || comment === void 0 ? void 0 : comment.liked_type\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      likesAndDislikes = _React$useState2[0],\n      setLikesAndDislikes = _React$useState2[1];\n\n  var handleCommentSetLike = function handleCommentSetLike(like) {\n    setLikesAndDislikes(like);\n    onSetLike(comment.id, like.vote);\n  };\n\n  var onCloseInput = function onCloseInput() {\n    setShowChange(false);\n  };\n\n  var onSaveComment = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(text, userId, parentId, commentId) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return onReplyComment(text, userId, parentId, commentId);\n\n            case 2:\n              onCloseInput();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSaveComment(_x, _x2, _x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.comment,\n    style: {\n      marginLeft: isChildren ? 10 : 0\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.commentFlex,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.user,\n        children: /*#__PURE__*/_jsxDEV(UserViewOnContent, {\n          time: new Date(comment.created_at).getTime(),\n          user: {\n            name: comment.user.name,\n            id: comment.user.id,\n            avatarUrl: comment.user.avatar\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this), isMyComment && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.actions,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-10\",\n          children: /*#__PURE__*/_jsxDEV(Dropdown, {\n            overlay: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/dots.svg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 32\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 29\n            }, this),\n            children: [/*#__PURE__*/_jsxDEV(MuiMenuItem, {\n              disabled: false,\n              onClick: function onClick() {\n                return setShowChange(true);\n              },\n              children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(MuiMenuItem, {\n              disabled: false,\n              onClick: function onClick() {},\n              children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.text,\n      children: !showChange ? comment.text : /*#__PURE__*/_jsxDEV(AddCommentBlock, {\n        comment: comment,\n        onAddComment: onSaveComment,\n        toUser: comment.user,\n        parentComment: comment\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 43\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.commentFlex,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.reply,\n        onClick: function onClick() {\n          return setShowReply(!showReply);\n        },\n        children: \"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(LikeBlock, {\n          vote: likesAndDislikes.vote,\n          likes: likesAndDislikes.likes,\n          dislikes: likesAndDislikes.dislikes,\n          mode: \"full\",\n          onChange: handleCommentSetLike\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), showReply && /*#__PURE__*/_jsxDEV(AddCommentBlock, {\n      onAddComment: onSaveComment,\n      toUser: comment.user,\n      parentComment: comment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 12\n  }, this);\n}\n\n_s(PostComment, \"950l0HvYmLCQcZC5UlGG1WvByD4=\");\n\n_c = PostComment;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostComment\");","map":{"version":3,"sources":["C:/Projects/projects/frontend/components/PostComment/index.tsx"],"names":["styles","UserViewOnContent","LikeBlock","React","useState","AddCommentBlock","Dropdown","MuiMenuItem","PostComment","comment","onReplyComment","isChildren","onSetLike","isMyComment","showReply","setShowReply","showChange","setShowChange","likes","likes_count","dislikes","dislikes_count","vote","liked_type","likesAndDislikes","setLikesAndDislikes","handleCommentSetLike","like","id","onCloseInput","onSaveComment","text","userId","parentId","commentId","marginLeft","commentFlex","user","Date","created_at","getTime","name","avatarUrl","avatar","actions","reply"],"mappings":"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","sourcesContent":["import styles from \"./PostCommentList.module.scss\";\r\nimport {UserViewOnContent} from \"../UserViewOnContent\";\r\nimport {LikeBlock, LikeBlockResult} from \"../LikeBlock\";\r\nimport React, {useState} from \"react\";\r\nimport {Comment} from \"../../interfaces\";\r\nimport {AddCommentBlock} from \"../AddCommentBlock\";\r\nimport {Dropdown} from \"../Dropdown\";\r\nimport MuiMenuItem from '@material-ui/core/MenuItem';\r\n\r\ntype Props = {\r\n    comment: Comment;\r\n    onReplyComment: (text: string, userId: number, parentId: number, commentId?: number) => void;\r\n    isChildren?: boolean;\r\n    userCanChangeComment?: boolean;\r\n    onSetLike: (postId: number, like: unknown) => void;\r\n    isMyComment: boolean;\r\n}\r\n\r\nexport function PostComment({comment, onReplyComment, isChildren, onSetLike, isMyComment}: Props) {\r\n    const [showReply, setShowReply] = useState(false);\r\n    const [showChange, setShowChange] = useState(false);\r\n    const [likesAndDislikes, setLikesAndDislikes] = React.useState<LikeBlockResult>({\r\n        likes: comment.likes_count,\r\n        dislikes: comment.dislikes_count,\r\n        vote: comment?.liked_type,\r\n    });\r\n\r\n\r\n    const handleCommentSetLike = (like: LikeBlockResult) => {\r\n        setLikesAndDislikes(like);\r\n        onSetLike(comment.id, like.vote)\r\n    }\r\n\r\n    const onCloseInput = () => {\r\n        setShowChange(false);\r\n    }\r\n\r\n    const onSaveComment = async (text: string, userId: number, parentId?: number, commentId?: number) => {\r\n        await onReplyComment(text, userId, parentId, commentId)\r\n        onCloseInput()\r\n    }\r\n\r\n    return <div className={styles.comment} style={{marginLeft: isChildren ? 10 : 0}}>\r\n        <div className={styles.commentFlex}>\r\n            <div className={styles.user}>\r\n                <UserViewOnContent\r\n\r\n                    time={new Date(comment.created_at).getTime()}\r\n                    user={{\r\n                        name: comment.user.name,\r\n                        id: comment.user.id,\r\n                        avatarUrl: comment.user.avatar\r\n                    }}/>\r\n            </div>\r\n\r\n            {isMyComment && ( <div className={styles.actions}>\r\n\r\n\r\n                <div className=\"ml-10\">\r\n                    <Dropdown\r\n                        overlay={\r\n                            <a><img src={\"/dots.svg\"}/></a>\r\n                        }\r\n                    >\r\n                        <MuiMenuItem disabled={false} onClick={() => setShowChange(true)}>\r\n                            Изменить\r\n                        </MuiMenuItem>\r\n\r\n                        <MuiMenuItem disabled={false} onClick={() => {\r\n                        }}>\r\n                            Удалить\r\n                        </MuiMenuItem>\r\n\r\n                    </Dropdown>\r\n                </div>\r\n\r\n            </div>)}\r\n\r\n        </div>\r\n\r\n        <div className={styles.text}>\r\n            {!showChange ? comment.text : <AddCommentBlock\r\n                comment={comment}\r\n                onAddComment={onSaveComment}\r\n                toUser={comment.user}\r\n                parentComment={comment}\r\n\r\n            />}\r\n        </div>\r\n\r\n\r\n        <div className={styles.commentFlex}>\r\n            <span className={styles.reply} onClick={() => setShowReply(!showReply)}>Ответить</span>\r\n\r\n            <div>\r\n                <LikeBlock\r\n                    vote={likesAndDislikes.vote}\r\n                    likes={likesAndDislikes.likes}\r\n                    dislikes={likesAndDislikes.dislikes}\r\n                    mode=\"full\"\r\n                    onChange={handleCommentSetLike}\r\n                />\r\n            </div>\r\n\r\n        </div>\r\n\r\n        {showReply && <AddCommentBlock onAddComment={onSaveComment} toUser={comment.user} parentComment={comment}/>}\r\n\r\n    </div>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}