{"ast":null,"code":"import _regeneratorRuntime from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from '../../core/axios';\nexport var saveImage = function saveImage(image) {\n  var formData = new FormData();\n  formData.append('image', image);\n  return axios.post('/api/posts/image-by-url', formData);\n};\nexport var savePost = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(postData) {\n    var body, _yield$axios$put, data, _yield$axios$post, _data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            body = {\n              body: postData.body,\n              title: postData.title,\n              description: 'Test',\n              themes: postData.themes || [],\n              status: postData === null || postData === void 0 ? void 0 : postData.status,\n              category: postData.category\n            };\n\n            if (!(postData !== null && postData !== void 0 && postData.id)) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 4;\n            return axios.put(\"/api/posts/\".concat(postData.id), body);\n\n          case 4:\n            _yield$axios$put = _context.sent;\n            data = _yield$axios$put.data;\n            return _context.abrupt(\"return\", data);\n\n          case 9:\n            _context.next = 11;\n            return axios.post(\"/api/posts\", body);\n\n          case 11:\n            _yield$axios$post = _context.sent;\n            _data = _yield$axios$post.data;\n            return _context.abrupt(\"return\", _data);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function savePost(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getPosts = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var params,\n        token,\n        headers,\n        _yield$axios$get,\n        data,\n        _args2 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            params = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n            token = _args2.length > 1 ? _args2[1] : undefined;\n            headers = {};\n\n            if (token) {\n              headers = {\n                Authorization: \"Bearer \".concat(token)\n              };\n            }\n\n            _context2.next = 6;\n            return axios.get('/api/posts', {\n              params: params,\n              headers: headers\n            });\n\n          case 6:\n            _yield$axios$get = _context2.sent;\n            data = _yield$axios$get.data;\n            return _context2.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getPosts() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var getThemes = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var _yield$axios$get2, data;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return axios.get('/api/posts/themes');\n\n          case 2:\n            _yield$axios$get2 = _context3.sent;\n            data = _yield$axios$get2.data;\n            return _context3.abrupt(\"return\", data);\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function getThemes() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var saveByUrl = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return axios.post('/api/posts/image-by-url', {\n              url: url\n            });\n\n          case 2:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function saveByUrl(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var showPost = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(slug, token) {\n    var _yield$axios$get3, data;\n\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return axios.get(\"/api/posts/\".concat(slug), {\n              headers: {\n                Authorization: token ? \"Bearer \".concat(token) : ''\n              }\n            });\n\n          case 2:\n            _yield$axios$get3 = _context5.sent;\n            data = _yield$axios$get3.data;\n            return _context5.abrupt(\"return\", data);\n\n          case 5:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function showPost(_x3, _x4) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var getPostComments = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id, apiToken) {\n    var _yield$axios$get4, data;\n\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return axios.get(\"/api/posts/\".concat(id, \"/comments\"), {\n              headers: {\n                Authorization: apiToken ? \"Bearer \".concat(apiToken) : ''\n              }\n            });\n\n          case 2:\n            _yield$axios$get4 = _context6.sent;\n            data = _yield$axios$get4.data;\n            return _context6.abrupt(\"return\", data);\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function getPostComments(_x5, _x6) {\n    return _ref6.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["C:/Projects/projects/frontend/services/api/PostApi.ts"],"names":["axios","saveImage","image","formData","FormData","append","post","savePost","postData","body","title","description","themes","status","category","id","put","data","getPosts","params","token","headers","Authorization","get","getThemes","saveByUrl","url","showPost","slug","getPostComments","apiToken"],"mappings":"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","sourcesContent":["import axios from '../../core/axios';\r\nimport {Category, Pagination, PostData, Theme} from '../../interfaces';\r\nimport {getCookie} from './UserApi';\r\n\r\nexport const saveImage = (image: File) => {\r\n    const formData = new FormData();\r\n    formData.append('image', image);\r\n    return axios.post('/api/posts/image-by-url', formData);\r\n};\r\n\r\nexport const savePost = async (postData: {\r\n    title: string;\r\n    body: any;\r\n    themes?: Theme[],\r\n    status?: string,\r\n    category?: Category,\r\n    id?: number,\r\n}) => {\r\n    let body = {\r\n        body: postData.body,\r\n        title: postData.title,\r\n        description: 'Test',\r\n        themes: postData.themes || [],\r\n        status: postData?.status,\r\n        category: postData.category,\r\n    };\r\n\r\n    if (postData?.id) {\r\n        const {data} = await axios.put(`/api/posts/${postData.id}`, body);\r\n        return data\r\n\r\n    } else {\r\n        const {data} = await axios.post(`/api/posts`, body);\r\n        return data\r\n    }\r\n};\r\n\r\nexport const getPosts = async (params = {}, token?: string): Promise<Pagination<PostData>> => {\r\n    let headers = {};\r\n\r\n    if (token) {\r\n        headers = {\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    }\r\n\r\n    const {data} = await axios.get('/api/posts', {\r\n        params,\r\n        headers\r\n    });\r\n\r\n    return data;\r\n};\r\n\r\nexport const getThemes = async (): Promise<Theme[]> => {\r\n    const {data} = await axios.get('/api/posts/themes');\r\n\r\n    return data;\r\n};\r\n\r\nexport const saveByUrl = async (url: string) => {\r\n    return await axios.post('/api/posts/image-by-url', {url});\r\n};\r\n\r\nexport const showPost = async (slug: string, token?: string) => {\r\n    const {data} = await axios.get(`/api/posts/${slug}`, {\r\n        headers: {\r\n            Authorization: token ? `Bearer ${token}` : ''\r\n        }\r\n    });\r\n    return data;\r\n};\r\n\r\nexport const getPostComments = async (id: number, apiToken?: string) => {\r\n    const {data} = await axios.get(`/api/posts/${id}/comments`, {\r\n        headers: {\r\n            Authorization: apiToken ? `Bearer ${apiToken}` : ''\r\n        }\r\n    })\r\n    return data;\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}