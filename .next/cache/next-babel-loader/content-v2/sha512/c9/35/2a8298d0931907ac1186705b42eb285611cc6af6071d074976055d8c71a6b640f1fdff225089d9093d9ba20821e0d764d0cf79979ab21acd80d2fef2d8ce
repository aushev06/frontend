{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Projects/projects/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Projects\\\\projects\\\\frontend\\\\pages\\\\tags\\\\[slug].tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useAllMQ } from \"../../utils/useAllMQ\";\nimport { setLike } from \"../../services/api/LikeApi\";\nimport { MainLayout } from \"../../layouts/MainLayout\";\nimport { MiniPost } from \"../../components/MiniPost\";\nimport { LoadMore } from \"../../components/LoadMore\";\nexport var __N_SSP = true;\nexport default function Home(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(props.posts.data),\n      posts = _useState[0],\n      setPosts = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var mq = useAllMQ();\n\n  var handleSetLike = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(postId, like) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return setLike(postId, 'post', like);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSetLike(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(MainLayout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper\",\n        children: [!mq.isXS && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-side\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: [isLoading && 'Загрука...', !isLoading && posts.map(function (post, key) {\n            return /*#__PURE__*/_jsxDEV(MiniPost, {\n              postData: {\n                commentsCount: post.comments_count,\n                description: post.description,\n                dislikesCount: post.dislikes_count,\n                likesCount: post.likes_count,\n                title: post.title,\n                viewsCount: post.views,\n                slug: post.slug,\n                user: {\n                  avatarUrl: post.user.avatar,\n                  id: post.user.id,\n                  name: post.user.name\n                },\n                imageUrl: post.img,\n                id: post.id,\n                tags: [],\n                time: new Date(post.updated_at),\n                vote: post === null || post === void 0 ? void 0 : post.liked_type\n              },\n              onSetLike: handleSetLike\n            }, post.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 36\n            }, _this);\n          }), !isLoading && page !== maxPage && /*#__PURE__*/_jsxDEV(LoadMore, {\n            onClick: function onClick() {\n              return setPage(page + 1);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }, this), !mq.isXS && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-side\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home, \"xJmUPP851yXAS8hSADcS2J+9eGk=\", false, function () {\n  return [useAllMQ];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Projects/projects/frontend/pages/tags/[slug].tsx"],"names":["React","useState","useAllMQ","setLike","MainLayout","MiniPost","LoadMore","Home","props","posts","data","setPosts","isLoading","setIsLoading","mq","handleSetLike","postId","like","isXS","map","post","key","commentsCount","comments_count","description","dislikesCount","dislikes_count","likesCount","likes_count","title","viewsCount","views","slug","user","avatarUrl","avatar","id","name","imageUrl","img","tags","time","Date","updated_at","vote","liked_type","page","maxPage","setPage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {useAllMQ} from \"../../utils/useAllMQ\";\r\nimport {setLike} from \"../../services/api/LikeApi\";\r\nimport {MainLayout} from \"../../layouts/MainLayout\";\r\nimport {MiniPost} from \"../../components/MiniPost\";\r\nimport {PostData} from \"../../interfaces\";\r\nimport {getPosts, showPost} from \"../../services/api/PostApi\";\r\nimport {getCategories} from \"../../services/api/CategoryApi\";\r\nimport {LoadMore} from \"../../components/LoadMore\";\r\n\r\n\r\nexport default function Home(props) {\r\n    const [posts, setPosts] = useState<PostData[]>(props.posts.data);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const mq = useAllMQ()\r\n\r\n    const handleSetLike = async (postId: number, like?: 'like' | 'dislike') => {\r\n        await setLike(postId, 'post', like)\r\n    }\r\n\r\n    return (\r\n        <main>\r\n            <MainLayout>\r\n                <div className=\"wrapper\">\r\n\r\n                    {!mq.isXS && (\r\n                        <div className=\"left-side\">\r\n\r\n                        </div>\r\n                    )}\r\n\r\n\r\n                    <div className=\"content\">\r\n\r\n                        {isLoading && 'Загрука...'}\r\n\r\n                        {!isLoading && posts.map((post, key) => {\r\n                            return <MiniPost\r\n                                key={post.id}\r\n                                postData={{\r\n                                    commentsCount: post.comments_count,\r\n                                    description: post.description,\r\n                                    dislikesCount: post.dislikes_count,\r\n                                    likesCount: post.likes_count,\r\n                                    title: post.title,\r\n                                    viewsCount: post.views,\r\n                                    slug: post.slug,\r\n                                    user: {\r\n                                        avatarUrl: post.user.avatar,\r\n                                        id: post.user.id,\r\n                                        name: post.user.name,\r\n                                    },\r\n                                    imageUrl: post.img,\r\n                                    id: post.id,\r\n                                    tags: [],\r\n                                    time: new Date(post.updated_at),\r\n                                    vote: post?.liked_type,\r\n                                }}\r\n                                onSetLike={handleSetLike}\r\n                            />;\r\n                        })}\r\n\r\n                        {!isLoading && page !== maxPage && (\r\n                            <LoadMore onClick={() => setPage(page + 1)} />\r\n                        )}\r\n\r\n                    </div>\r\n                    {!mq.isXS && (\r\n                        <div className=\"right-side\">\r\n\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </MainLayout>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const posts =  await getPosts({categories: ctx.query?.slug}, ctx.req.cookies?.auth_token);\r\n\r\n    return {\r\n        props: {\r\n            posts\r\n        },\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}