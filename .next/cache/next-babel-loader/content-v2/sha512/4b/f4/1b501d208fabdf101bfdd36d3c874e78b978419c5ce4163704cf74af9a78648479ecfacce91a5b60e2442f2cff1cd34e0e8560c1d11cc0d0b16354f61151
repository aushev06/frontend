{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Projects\\\\projects\\\\frontend\\\\pages\\\\profile\\\\[id].tsx\";\nimport React, { useState } from 'react';\nimport { MainLayout } from \"../../layouts/MainLayout\";\nimport UserCard from \"../../components/UserCard\";\nimport { useRouter } from \"next/router\";\nimport { getPosts } from \"../../services/api/PostApi\";\nimport { MiniPost } from \"../../components/MiniPost\";\nimport { setLike } from \"../../services/api/LikeApi\";\nimport { UserApi } from \"../../services/api/UserApi\";\nexport default function Profile(props) {\n  const {\n    0: user,\n    1: setUser\n  } = useState(props.user);\n  const router = useRouter();\n  const {\n    id,\n    type\n  } = router.query;\n  const types = {\n    drafts: 'draft',\n    articles: 'active'\n  };\n  const [posts, setPosts] = React.useState();\n  React.useEffect(() => {\n    const effect = async () => {\n      const posts = await getPosts({\n        user_ids: id,\n        status: types[type]\n      });\n      setPosts(posts);\n    };\n\n    effect();\n  }, [type]);\n\n  const onTypeChange = async t => {\n    const posts = await getPosts({\n      status: types[t]\n    });\n    setPosts(posts);\n  };\n\n  const handleSetLike = async (postId, like) => {\n    await setLike(postId, 'post', like);\n  };\n\n  return /*#__PURE__*/_jsxDEV(MainLayout, {\n    children: [/*#__PURE__*/_jsxDEV(UserCard, {\n      nickname: user === null || user === void 0 ? void 0 : user.name,\n      profession: user === null || user === void 0 ? void 0 : user.position,\n      status: user === null || user === void 0 ? void 0 : user.description,\n      sinceDate: user === null || user === void 0 ? void 0 : user.created_at,\n      commentsCount: user === null || user === void 0 ? void 0 : user.comments_count,\n      readyForWork: user === null || user === void 0 ? void 0 : user.ready_for_work,\n      articleType: type || 'articles',\n      onChangeType: onTypeChange,\n      isAuthUser: !!(user !== null && user !== void 0 && user.id),\n      recognized: !!user.recognized,\n      avatar: user.avatar,\n      postCount: posts.total\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'content mt-15 m-15',\n      children: posts.data.map(post => {\n        return /*#__PURE__*/_jsxDEV(MiniPost, {\n          postData: {\n            commentsCount: post.comments_count,\n            description: post.description,\n            dislikesCount: post.dislikes_count,\n            likesCount: post.likes_count,\n            title: post.title,\n            viewsCount: post.views,\n            slug: post.slug,\n            user: {\n              avatarUrl: post.user.avatar,\n              id: post.user.id,\n              name: post.user.name\n            },\n            imageUrl: post.img,\n            id: post.id,\n            tags: [],\n            time: new Date(post.updated_at),\n            vote: post === null || post === void 0 ? void 0 : post.liked_type\n          },\n          onSetLike: handleSetLike\n        }, post.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n}\nexport async function getServerSideProps(ctx) {\n  return {\n    props: {\n      user: await UserApi.show(ctx.query.id)\n    }\n  };\n}","map":{"version":3,"sources":["C:/Projects/projects/frontend/pages/profile/[id].tsx"],"names":["React","useState","MainLayout","UserCard","useRouter","getPosts","MiniPost","setLike","UserApi","Profile","props","user","setUser","router","id","type","query","types","drafts","articles","posts","setPosts","useEffect","effect","user_ids","status","onTypeChange","t","handleSetLike","postId","like","name","position","description","created_at","comments_count","ready_for_work","recognized","avatar","total","data","map","post","commentsCount","dislikesCount","dislikes_count","likesCount","likes_count","title","viewsCount","views","slug","avatarUrl","imageUrl","img","tags","time","Date","updated_at","vote","liked_type","getServerSideProps","ctx","show"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {MainLayout} from \"../../layouts/MainLayout\";\r\nimport UserCard from \"../../components/UserCard\";\r\nimport {useRouter} from \"next/router\";\r\nimport {getPostComments, getPosts, showPost} from \"../../services/api/PostApi\";\r\nimport {MiniPost} from \"../../components/MiniPost\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {selectUserState} from \"../../redux/user/user.selector\";\r\nimport {setLike} from \"../../services/api/LikeApi\";\r\nimport {Pagination, PostData, User} from \"../../interfaces\";\r\nimport {UserApi} from \"../../services/api/UserApi\";\r\n\r\n\r\nexport default function Profile (props) {\r\n    const [user, setUser] = useState<User>(props.user);\r\n    const router = useRouter()\r\n    const { id, type } = router.query\r\n    const types = {\r\n        drafts: 'draft',\r\n        articles: 'active'\r\n    }\r\n\r\n    const [posts, setPosts] = React.useState<Pagination<PostData>>()\r\n\r\n    React.useEffect(() => {\r\n        const effect = async () => {\r\n            const posts = await getPosts({user_ids: id, status: types[type as string]});\r\n            setPosts(posts)\r\n        }\r\n\r\n        effect();\r\n\r\n    }, [type])\r\n\r\n    const onTypeChange = async (t: string) => {\r\n        const posts = await getPosts({status: types[t]});\r\n        setPosts(posts)\r\n    }\r\n\r\n    const handleSetLike = async (postId: number, like?: 'like' | 'dislike') => {\r\n        await setLike(postId, 'post', like);\r\n    }\r\n\r\n    return(\r\n        <MainLayout>\r\n            <UserCard nickname={user?.name}\r\n                      profession={user?.position}\r\n                      status={user?.description}\r\n                      sinceDate={user?.created_at}\r\n                      commentsCount={user?.comments_count}\r\n                      readyForWork={user?.ready_for_work}\r\n                      articleType={type as string || 'articles' as string}\r\n                      onChangeType={onTypeChange}\r\n                      isAuthUser={!!user?.id}\r\n                      recognized={!!user.recognized}\r\n                      avatar={user.avatar}\r\n                      postCount={posts.total}\r\n\r\n            />\r\n\r\n\r\n           <div className={'content mt-15 m-15'}>\r\n               {posts.data.map(post => {\r\n                   return  <MiniPost\r\n                       key={post.id}\r\n                       postData={{\r\n                           commentsCount: post.comments_count,\r\n                           description: post.description,\r\n                           dislikesCount: post.dislikes_count,\r\n                           likesCount: post.likes_count,\r\n                           title: post.title,\r\n                           viewsCount: post.views,\r\n                           slug: post.slug,\r\n                           user: {\r\n                               avatarUrl: post.user.avatar,\r\n                               id: post.user.id,\r\n                               name: post.user.name,\r\n                           },\r\n                           imageUrl: post.img,\r\n                           id: post.id,\r\n                           tags: [],\r\n                           time: new Date(post.updated_at),\r\n                           vote: post?.liked_type,\r\n                       }}\r\n                    onSetLike={handleSetLike}\r\n                   />;\r\n               })}\r\n           </div>\r\n\r\n        </MainLayout>\r\n    )\r\n}\r\n\r\n\r\nexport async function getServerSideProps(ctx) {\r\n\r\n    return {\r\n        props: {\r\n            user: await UserApi.show(ctx.query.id)\r\n        },\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}